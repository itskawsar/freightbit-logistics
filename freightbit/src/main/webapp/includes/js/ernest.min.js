function typeValidate(){var e=document.getElementById("mode"),t=e.options[e.selectedIndex].value;"DOOR TO PIER"==t?($("#deliveryaddress").prop("disabled",!0),$("#pickupaddress").prop("disabled",!1),$("#datepicker1").prop("disabled",!1),$("#datepicker2").prop("disabled",!0)):"PIER TO DOOR"==t?($("#deliveryaddress").prop("disabled",!1),$("#pickupaddress").prop("disabled",!0),$("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!1)):"PIER TO PIER"==t&&($("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!0),$("#pickupaddress").prop("disabled",!0),$("#deliveryaddress").prop("disabled",!0))}function getMaxValue(e,t){if("10 FT"==t){if("VOLUME"==e)return 14;if("WEIGHT"==e)return 9e3}else if("20 FT"==t){if("VOLUME"==e)return 28;if("WEIGHT"==e)return 18e3}else if("40 STD FT"==t){if("VOLUME"==e)return 56;if("WEIGHT"==e)return 2e4}else if("40 HC FT"==t){if("VOLUME"==e)return 78;if("WEIGHT"==e)return 22e3}}function initValidationScript(e){for(var t,a,o,n,d=$('.mainTable tbody td input[type="checkbox"]'),r=$(".mainTable tbody tr td:nth-child(4)"),l=$(".mainTable tbody tr td:nth-child(5)"),i=$("#result"),s=$("#result-vol"),c=$("#containerType").val(),p=$("#submitBtn"),u=$(".containerItems tbody tr td:nth-child(3)"),h=$(".containerItems tbody tr td:nth-child(4)"),f=0;f<$(".mainTable tbody tr").size();f++)r.eq(f).attr("id","val"+(f+1)),l.eq(f).attr("id","val"+(f+1)+"-vol"),d.eq(f).attr("class","val"+(f+1)),d.eq(f).is(":checked")&&(a=parseFloat(i.text())+parseFloat(r.eq(f).text()),t=parseFloat(s.text())+parseFloat(l.eq(f).text()),i.empty().append(a),s.empty().append(t));if($("#maxVol").empty().append(getMaxValue("VOLUME",c)),$("#maxWt").empty().append(getMaxValue("WEIGHT",c)),"CONSO_EDIT"==e)for(var m=0;m<$(".containerItems tbody tr").size();m++)o=parseFloat(h.eq(m).text())+parseFloat(s.text()),n=parseFloat(u.eq(m).text())+parseFloat(i.text()),i.empty().append(n),s.empty().append(o);d.change(function(){var t,a,d=parseFloat($("#maxWt").text()),r=parseFloat($("#maxVol").text()),l=$("#"+this.className),c=$("#"+this.className+"-vol");$.isNumeric(l.text())&&$.isNumeric(c.text())&&(this.checked?(t=parseFloat(i.text())+parseFloat(l.text()),a=parseFloat(s.text())+parseFloat(c.text())):(t=parseFloat(i.text())-parseFloat(l.text()),a=parseFloat(s.text())-parseFloat(c.text()))),"CONSO_EDIT"==e?t==n||a==o||t>d||a>r?p.prop("disabled",!0):p.prop("disabled",!1):t>d||a>r?(p.prop("disabled",!0),$("#finalBtn").addClass("disabled")):(p.prop("disabled",!1),$("#finalBtn").removeClass("disabled")),t>d&&(t='<font color="red">'+t+"</font>"),a>r&&(a='<font color="red">'+a+"</font>"),(0==t||0==a)&&(p.prop("disabled",!0),$("#finalBtn").addClass("disabled")),i.empty().append(t),s.empty().append(a)})}function resetBox(e){if($('.mainTable tbody td input[type="checkbox"]').removeAttr("checked"),"CONSO_EDIT"==e){for(var t=0,a=0,o=0;o<$(".containerItems tbody tr").size();o++)t=parseFloat($(".containerItems tbody tr td:nth-child(4)").eq(o).text())+t,a=parseFloat($(".containerItems tbody tr td:nth-child(3)").eq(o).text())+a;$("#result").empty().append(a),$("#result-vol").empty().append(t),$("#submitBtn").prop("disabled",!0)}else $("#result").empty().append(0),$("#result-vol").empty().append(0)}function tablePropClass(e,t,a,o,n,d,r,l){for(var i=$("."+t+" tbody tr"),s=0;s<i.size();s++){var c=$("."+t+" tbody tr td:nth-child("+a+")").eq(s).text(),p=$("."+t+" tbody tr td:nth-child("+o+")").eq(s),u=$("."+t+" tbody tr td:nth-child("+n+")").eq(s),h=$("."+t+" tbody tr td:nth-child("+d+")").eq(s),f=changeIcons(p.text()),m=reqAbbrev(u.text()),b=modeAbbrev(h.text());if("DESTI_ORIG"==e){var y=$("."+t+" tbody tr td:nth-child("+l+")").eq(s),v=$("."+t+" tbody tr td:nth-child("+r+")").eq(s),D=placeAbbrev(y.text()),O=placeAbbrev(v.text());y.empty().append(D),v.empty().append(O)}i.eq(s).css("background-color",trColor(c)),p.empty().append(f),u.empty().append(m),h.empty().append(b)}}function tableProp(e,t,a,o,n,d,r,l,i){for(var s=$("#"+t+" tbody tr"),c=0;c<s.size();c++){var p=$("#"+t+" tbody tr td:nth-child("+a+")").eq(c).text(),u=$("#"+t+" tbody tr td:nth-child("+o+")").eq(c),h=$("#"+t+" tbody tr td:nth-child("+n+")").eq(c),f=$("#"+t+" tbody tr td:nth-child("+d+")").eq(c),m=$("#"+t+" tbody tr td:nth-child("+i+")").eq(c),b=changeIcons(u.text()),y=reqAbbrev(h.text()),v=modeAbbrev(f.text()),D=dateAbbrev(m.text());if("DESTI_ORIG"==e){var O=$("#"+t+" tbody tr td:nth-child("+l+")").eq(c),g=$("#"+t+" tbody tr td:nth-child("+r+")").eq(c),T=placeAbbrev(O.text()),x=placeAbbrev(g.text());O.empty().append(T),g.empty().append(x)}s.eq(c).css("background-color",trColor(p)),u.empty().append(b),h.empty().append(y),f.empty().append(v),m.empty().append(D)}}function placeAbbrev(e){return"MANILA"==e?"MNL":"BACOLOD"==e?"BAC":"BUTUAN"==e?"BXU":"CAGAYAN"==e?"CGY":"COTABATO"==e?"CBO":"DAVAO"==e?"DVO":"DUMAGUETE"==e?"DGT":"DIPOLOG"==e?"DPG":"GEN. SANTOS"==e?"GES":"ILIGAN"==e?"ILI":"ILOILO"==e?"ILO":"OZAMIS"==e?"OZA":"GEN. SANTOS"==e?"GES":"PALAWAN"==e?"PPS":"ROXAS"==e?"RXS":"TAGBILARAN"==e?"TAG":"TACLOBAN"==e?"TAC":"ZAMBOANGA"==e?"ZAM":"CEBU"==e?"CEB":e}function trColor(e){return"DISAPPROVED"==e||"CANCELLED"==e?"#f2dede":"APPROVED"==e||"SERVICE ACCOMPLISHED"==e?"#dff0d8":"ON GOING"==e?"#bce8f1":"PENDING"==e||"INCOMPLETE"==e?"#f0ad4e":void 0}function changeIcons(e){return"SHIPPING AND TRUCKING"==e?"<i class='fa fa-anchor' /> <i class='fa fa-truck' />":"SHIPPING"==e?"<i class='fa fa-anchor' />":"TRUCKING"==e?"<i class='fa fa-truck' />":e}function reqAbbrev(e){return"FULL CARGO LOAD"==e||"FULL CONTAINER LOAD"==e?"FCL":"FULL TRUCK LOAD"==e?"FTL":"LESS TRUCK LOAD"==e?"LTL":"LESS CARGO LOAD"==e||"LESS CONTAINER LOAD"==e?"LCL":"LOOSE CARGO LOAD"==e?"LC":"ROLLING CARGO LOAD"==e?"RCU":e}function modeAbbrev(e){return"DOOR TO DOOR"==e?"DD":"DOOR TO PIER"==e||"DOOR TO PORT"==e?"DP":"PIER TO DOOR"==e||"PORT TO DOOR"==e?"PD":"PIER TO PIER"==e||"PORT TO PORT"==e?"PP":"PICKUP"==e?"PUP":"DELIVERY"==e?"DEL":"INTER-WAREHOUSE"==e?"ITW":e}function dateAbbrev_Format3(e){var t,a=e.split("-");return t="01"==a[0]?"JAN":"02"==a[0]?"FEB":"03"==a[0]?"MAR":"04"==a[0]?"APR":"05"==a[0]?"MAY":"06"==a[0]?"JUN":"07"==a[0]?"JUL":"08"==a[0]?"AUG":"09"==a[0]?"SEP":"10"==a[0]?"OCT":"11"==a[0]?"NOV":"12"==a[0]?"DEC":a[0],a[1]+"-"+t+"-"+a[2]}function dateAbbrev(e){var t,a=e.split("-");return t="01"==a[1]?"JAN":"02"==a[1]?"FEB":"03"==a[1]?"MAR":"04"==a[1]?"APR":"05"==a[1]?"MAY":"06"==a[1]?"JUN":"07"==a[1]?"JUL":"08"==a[1]?"AUG":"09"==a[1]?"SEP":"10"==a[1]?"OCT":"11"==a[1]?"NOV":"12"==a[1]?"DEC":a[1],a[2]+"-"+t+"-"+a[0]}function initTimestampAbbrev(e,t){for(var a=$("."+e+" tbody tr td:nth-child("+t+")"),o=0;o<a.size();o++){var n=a.eq(o).text().split(" ");""!=n[0]&&a.eq(o).empty().append(dateAbbrev(n[0])+" "+n[1].substr(0,8))}}function dateAbbrev_Format2(e,t){for(var a=$("#"+e+" tbody tr"),o=0;o<a.size();o++){var n,d=$("#"+e+" tbody tr td:nth-child("+t+")").eq(o),r=d.text().split("-");n="01"==r[0]?"JAN":"02"==r[0]?"FEB":"03"==r[0]?"MAR":"04"==r[0]?"APR":"05"==r[0]?"MAY":"06"==r[0]?"JUN":"07"==r[0]?"JUL":"08"==r[0]?"AUG":"09"==r[0]?"SEP":"10"==r[0]?"OCT":"11"==r[0]?"NOV":"12"==r[0]?"DEC":r[0],d.empty().append(r[1]+"-"+n+"-"+r[2])}}function addCommas(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}function newlineHandler(e,t){for(var a,o=$("."+e+" tbody tr td:nth-child("+t+")"),n=0;n<o.size();n++)a=o.eq(n).text().replace(/\n/g,"<br />"),o.eq(n).empty().append(a)}function containerHandler(e,t,a,o){for(var n=$("."+e+" tbody tr td:nth-child("+t+")"),d=0;d<=n.size();d++){var r=$("."+e+" tbody tr td:nth-child("+t+")").eq(d),l=$("."+e+" tbody tr td:nth-child("+a+")").eq(d),i=parseFloat($("."+e+" tbody tr td:nth-child("+a+")").eq(d).text()),s=$("."+e+" tbody tr td:nth-child("+o+")").eq(d),c=parseFloat($("."+e+" tbody tr td:nth-child("+o+")").eq(d).text()),p=containerAbbrev(r.text()),u=addCommas(i.toFixed(0).toString()),h=addCommas(c.toFixed(0).toString());r.empty().append(p),l.empty().append(u),s.empty().append(h)}}function weightVolumeHandler(e,t,a){for(var o=$("."+e+" tbody tr td:nth-child("+t+")"),n=0;n<=o.size();n++){var d=parseFloat($("."+e+" tbody tr td:nth-child("+t+")").eq(n).text()),r=parseFloat($("."+e+" tbody tr td:nth-child("+a+")").eq(n).text()),l=$("."+e+" tbody tr td:nth-child("+t+")").eq(n),i=$("."+e+" tbody tr td:nth-child("+a+")").eq(n),s=addCommas(d.toFixed(0).toString()),c=addCommas(r.toFixed(0).toString());l.empty().append(s),i.empty().append(c)}}function itemHandler(e,t,a,o,n,d){for(var r=$("."+e+" tbody tr td:nth-child("+t+")"),l=0;l<=r.size();l++){var i=parseFloat($("."+e+" tbody tr td:nth-child("+t+")").eq(l).text()),s=parseFloat($("."+e+" tbody tr td:nth-child("+a+")").eq(l).text()),c=parseFloat($("."+e+" tbody tr td:nth-child("+o+")").eq(l).text()),p=parseFloat($("."+e+" tbody tr td:nth-child("+n+")").eq(l).text()),u=parseFloat($("."+e+" tbody tr td:nth-child("+d+")").eq(l).text()),h=$("."+e+" tbody tr td:nth-child("+t+")").eq(l),f=$("."+e+" tbody tr td:nth-child("+a+")").eq(l),m=$("."+e+" tbody tr td:nth-child("+o+")").eq(l),b=$("."+e+" tbody tr td:nth-child("+n+")").eq(l),y=$("."+e+" tbody tr td:nth-child("+d+")").eq(l),v=addCommas(i.toFixed(0).toString()),D=addCommas(s.toFixed(0).toString()),O=addCommas(c.toFixed(0).toString()),g=addCommas(p.toFixed(2).toString()),T=addCommas(u.toFixed(0).toString());h.empty().append(v),f.empty().append(D),m.empty().append(O),b.empty().append(g),y.empty().append(T)}}function containerAbbrev(e){return"10 FOOTER"==e?"10 FT":"20 FOOTER"==e?"20 FT":"40 STD FOOTER"==e?"40 STD FT":"40 HC FOOTER"==e?"40 HC FT":e}function computeAll(e,t,a,o){var n=$("."+e+' tbody tr td input[type="checkbox"]'),d=0,r=0;if("ADD"==o){for(var l=0;l<n.size();l++){var i=parseFloat(n.eq(l).closest("tr").find("td").eq(8).text()),s=parseFloat(n.eq(l).closest("tr").find("td").eq(9).text());d+=i,r+=s}$("#"+t).empty().append(d),$("#"+a).empty().append(r),triggerComputation(d,r)}else"SUBTRACT"==o&&($("#"+a).empty().append("0"),$("#"+t).empty().append("0"),$("#recommendedContent").empty().append("Choose item(s) first"))}function triggerComputation(e,t){startRecommendation("mainReco","recommendedContent",e,t)}function seaFreightLclComputation(e,t,a){var o=$("."+e+' tbody tr td input[type="checkbox"]');o.change(function(){var e=parseFloat($(this).closest("tr").find("td").eq(9).text()),o=parseFloat($(this).closest("tr").find("td").eq(10).text()),n=$("#"+t),d=$("#"+a);$(this).is(":checked")?(e=parseFloat(n.text())+e,o=parseFloat(d.text())+o,n.empty().append(e),d.empty().append(o)):(e=parseFloat(n.text())-e,o=parseFloat(d.text())-o,n.empty().append(e),d.empty().append(o)),startRecommendation("mainReco","recommendedContent",e,o)})}function startRecommendation(e,t,a,o){if(0==a||0==o)$("#"+t).empty().append("Choose item(s) first");else{var n;n=firstRecommendation(a,o),$("#"+t).empty().append(n)}}function firstRecommendation(e,t){for(var a=e,o=t,n=0,d=0,r=0,l=0,i="NONE";;){if(0>=o)break;o>53.2||a>15320?(a-=16890,o-=74.1,n++):o>26.6||a>14870?(a-=15320,o-=53.2,d++):o>13.3||a>7250?(a-=14870,o-=26.6,r++):(o>0||a>0)&&(a-=7250,o-=13.3,l++)}return 0!=n&&(i="<p>"+n+" - 40 FOOTER HC CONTAINER(S)</p>"),0!=d&&(i="NONE"==i?"<p>"+d+" - 40 FOOTER STD CONTAINER(S)</p>":i+"<p>"+d+" - 40 FOOTER STD CONTAINER(S)</p>"),0!=r&&(i="NONE"==i?"<p>"+r+" - 20 FOOTER CONTAINER(S)</p>":i+"<p>"+r+" - 20 FOOTER CONTAINER(S)</p>"),0!=l&&(i="NONE"==i?"<p>"+l+" - 10 FOOTER CONTAINER(S)</p>":i+"<p>"+l+" - 10 FOOTER CONTAINER(S)</p>"),i}function massCheckbox(e,t){$("#"+e).click(function(){var e=$("."+t+' tbody tr td input[type="checkbox"]');e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0)})}function validationForm(e,t,a){function o(){console.clear();for(var o=$("."+e+":enabled"),n=0,d=0;d<o.size();d++)""!=o.eq(d).val()&&void 0!=o.eq(d).val()&&(n++,console.log("- "+o.eq(d).val()));console.log(n+" out of "+o.size()),"BOOKING"==a?n==o.size()&&notifBox_booking("notifBox")?t.prop("disabled",!1):t.prop("disabled",!0):n==o.size()?t.prop("disabled",!1):t.prop("disabled",!0)}var n=$("."+e+":enabled"),t=$("."+t);n.change(function(){o()}),n.keyup(function(){o()}),n.click(function(){o()}),n.hover(function(){o()}),"BOOKING"==a&&$(".notifBox").click(function(){o()})}function postAjaxHtml(e,t,a,o){$.ajax({url:e,type:"POST",dataType:"html",success:function(e){$("#"+t).html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showGateOutFields(e){$.ajax({url:"loadCheckoutFormPage",type:"POST",data:{containerIdParam:e},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showActualDateFields(e){$.ajax({url:"loadActualDateForm",type:"POST",data:{statusIdParam:e},dataType:"html",success:function(e){$("#actualInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showEditItemListingFields(e){$.ajax({url:"loadEditItemListing",type:"POST",async:!1,data:{orderItemIdParam:e},dataType:"html",success:function(e){$("#editItemListingInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showContainerDetails(e){$.ajax({url:"loadContainerDetails",type:"POST",data:{orderItemIdParam:e},dataType:"html",success:function(e){$("#containerInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function restrictField_Numbers(e){$("."+e).keypress(function(e){var t=[],a=e.which;for(i=48;i<58;i++)t.push(i);t.indexOf(a)>=0||e.preventDefault()})}function notifBox_booking(e){for(var t=!1,a=0;a<$("."+e).size();a++)$("."+e).eq(a).is(":checked")&&(t=!0);return t}function validateSearchModal(e,t,a){function o(){console.clear(),""!=$("."+t).val()&&""!=$("."+a).val()?($("."+e).prop("disabled",!1),console.log("ENABLE BUTTON")):($("."+e).prop("disabled",!0),console.log("DISABLE BUTTON"))}$("."+t).keyup(function(){o()}),$("."+a).change(function(){o()})}function changeDateValue(e,t){var a=new Date(e.val());return a.setDate("DECREMENT"==t?a.getDate()-1:a.getDate()+1),a=a.getMonth()+1+"-"+a.getDate()+"-"+a.getUTCFullYear()}function hideVesselSchedule(){for(var e=$(".listOfSchedules tbody tr td:nth-child(6)"),t=$(".listOfSchedules tbody tr td:nth-child(7)"),a=$(".listOfSchedules tbody tr td:nth-child(8)"),o=$("#bookingClass"),n=(new Date).setHours(0,0,0,0),d=new Date($(".pickupDate").val()).setHours(0,0,0,0),r=new Date($(".deliveryDate").val()).setHours(0,0,0,0),l=($(".currentSchedulesTable tbody tr td:nth-child(2)").eq(0).text(),$(".listOfSchedules tbody tr td:nth-child(2)"),0);l<e.size();l++){var i=new Date(e.eq(l).text()).setHours(0,0,0,0),s=new Date(t.eq(l).text()).setHours(0,0,0,0);if(n>i)e.eq(l).closest("tr").remove();else if(d>i||s>r)e.eq(l).closest("tr").remove();else{if("REGULAR"==o.val()){if("PREMIUM"==a.eq(l).text()){a.eq(l).closest("tr").remove();continue}}else if("ECONOMY"==o.val()&&"ECONOMY"!=a.eq(l).text()){a.eq(l).closest("tr").remove();continue}var c=dateAbbrev_Format3(t.eq(l).text()),p=dateAbbrev_Format3(e.eq(l).text());t.eq(l).empty().append(c),e.eq(l).empty().append(p)}}setTimeout(function(){0==$(".listOfSchedules tbody tr").size()?$(".loadingDiv").empty().append("<i>No schedule found.</i>"):($(".loadingDiv").hide(),$(".tableDiv").fadeIn())},1e3)}function addTotalRate(){for(var e=$(".itemListing tbody tr td:nth-child(7)"),t=0,a=0;a<e.size();a++)if($.isNumeric(parseFloat(e.eq(a).text()))){var o=parseFloat(e.eq(a).text());t+=o,e.eq(a).empty().append(o.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))}else e.eq(a).empty().append('<font color="red">0.00</font>');t=t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),(0==t||0==t||0==t)&&(t='<font color="red">'+t+"</font>"),$("#totalRate").empty().append(t),$(".loadingDiv").hide(),$(".tableDiv").fadeIn()}function dateValidationInit(){$(".finalSaveBtn").click(function(){var e=new Date($(".pickupDate").val()),t=new Date($(".departureDate").val()),a=new Date($(".finalPickupDate").val()),o=($(".finalSaveBtn"),$(".serviceModeField").val(),$(".serviceTypeField").val()),n=($(".originForm"),$("#vendorListOrigin").val()),d=$("#driverList").val(),r=$("#trucksList").val();if("TRUCKING"!=o)if("Invalid Date"!=t&&"Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0)&&a.setHours(0,0,0,0)<=t.setHours(0,0,0,0))finalPickupDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be between <font color="red">'+e+'</font> and <font color="red">'+t+"</font> <br/>Do you still wish to proceed?";$("#dateWarningModalBody").empty().append(l),$("#dateWarningModal").modal("show")}else if("Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0))finalPickupDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var l='Date must be no later than <font color="red">'+e+"</font>";$("#dateWarningModalBody").empty().append(l),$("#dateWarningModal").modal("show")}else if(a.setHours(0,0,0,0)<=t.setHours(0,0,0,0))finalPickupDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be no later than <font color="red">'+t+"</font>";$("#dateWarningModalBody").empty().append(l),$("#dateWarningModal").modal("show")}else finalPickupDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show")})}function dateValidationInitDes(){$(".finalSaveBtnDes").click(function(){var e=new Date($(".deliveryDate").val()),t=new Date($(".arrivalDate").val()),a=new Date($(".finalDeliveryDate").val()),o=($(".finalSaveBtnDes").val(),$(".serviceModeField").val(),$(".serviceTypeField").val()),n=($(".destinationForm").val(),$("#vendorListDestination").val()),d=$("#driverListDestination").val(),r=$("#trucksListDestination").val();if("TRUCKING"!=o)if("Invalid Date"!=t&&"Invalid Date"!=e)if(e.setHours(0,0,0,0)>=a.setHours(0,0,0,0)&&t.setHours(0,0,0,0)<=a.setHours(0,0,0,0))finalDeliveryDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be between <font color="red">'+t+'</font> and <font color="red">'+e+"</font> <br/>Do you still wish to proceed?";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}else if("Invalid Date"!=e)if(e.setHours(0,0,0,0)>=a.setHours(0,0,0,0))finalDeliveryDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var l='Date must be no later than <font color="red">'+e+"</font>";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}else if(t.setHours(0,0,0,0)<=a.setHours(0,0,0,0))finalDeliveryDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show");else{t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be on or after <font color="red">'+t+"</font>";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}else finalDeliveryDateModal(n,d,r,a),$("#saveDispatchPlanning").modal("show")})}function finalPickupDateModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchAction",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalPickupParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalDeliveryDateModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchActionDes",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalDeliveryParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalPickupDateBulkModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchBulkAction",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalPickupParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalDeliveryDateBulkModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchBulkActionDes",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalDeliveryParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function sameDateValidationInit(){$(".submitBtn").click(function(){var e=new Date($(".departureDate").val()),t=new Date($(".arrivalDate").val()),a=($(".submitBtn"),$(".vesselScheduleForm"));if(e.setHours(0,0,0,0)==t.setHours(0,0,0,0)){var o="Departure Date is the same with Arrival Date";$("#dateWarningModalBody").empty().append(o),$("#dateWarningModal").modal("show")}else a.submit()})}function vesselScheduleColor(e,t){for(var a=$("#"+e+" tbody tr td:nth-child("+t+")"),o=0;o<a.size();o++){var n=new Date(a.eq(o).text()).setHours(0,0,0,0),d=(new Date).setHours(0,0,0,0);d>n?a.eq(o).closest("tr").css("background-color","#f2a5aa"):a.eq(o).closest("tr").css("background-color","#dff0d8")}}function changeDocumentInputLabels(e){var t=$(".documentSeries");switch(e){case"BOOKING REQUEST FORM":t.empty().append('BRF Number <span class="asterisk_red"></span>');break;case"PROFORMA BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"MASTER BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"HOUSE BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"HOUSE WAYBILL ORIGIN":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"MASTER WAYBILL ORIGIN":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"HOUSE WAYBILL DESTINATION":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"MASTER WAYBILL DESTINATION":t.empty().append('Waybill Number <span class="asterisk_red"></span>')}}function preventSamePort(e,t){t.find("option").show(),t.find('option:contains("'+e.val()+'")').hide()}function buttonControl(){switch($(".serviceModeInput").val()){case"PIER TO DOOR":$(".houseWaybillDestinationBtn").show();break;case"DOOR TO PIER":$(".houseWaybillOriginBtn").show(),$(".houseWaybillDestinationBtn").hide();break;case"PIER TO PIER":$(".houseWaybillDestinationBtn").hide(),$(".houseWaybillOriginBtn").hide();break;default:$(".houseWaybillDestinationBtn").show(),$(".houseWaybillOriginBtn").show()}}function dispatchFilterScheduleOrigin(){$(".dispatchSaveBtn").click(function(){for(var e,t,a=$(".freightTableBulk tbody tr"),o=$(".freightTableBulk tbody tr td:nth-child(6)"),n=new Date($(".dispatchFinalPickup").val()),d=($(".dispatchOriginForm"),$("#vendorListOrigin").val()),r=$("#driverList").val(),l=$("#trucksList").val(),i=$(".serviceType").val(),s=0;s<a.size();s++){var c=new Date(o.eq(s).text()).setHours(0,0,0,0);0==s&&(t=c),t>=c&&(t=c)}if("TRUCKING"!=i)if(t>=n.setHours(0,0,0,0))finalPickupDateBulkModal(d,r,l,n),$("#saveDispatchPlanning").modal("show");else{e=new Date(t),e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var p='Date must be no later than <font color="red">'+e+"</font> <br/> Do you still wish to proceed?";$("#dateWarningModalBody").empty().append(p),$("#dateWarningModal").modal("show")}else finalPickupDateBulkModal(d,r,l,n),$("#saveDispatchPlanning").modal("show")})}function dispatchFilterScheduleDestination(){$(".dispatchSaveBtnDes").click(function(){for(var e,t,a=$(".freightTableBulk tbody tr"),o=$(".freightTableBulk tbody tr td:nth-child(7)"),n=new Date($(".dispatchFinalDelivery").val()),d=($(".dispatchDestinationForm"),$("#vendorListDestination").val()),r=$("#driverListDestination").val(),l=$("#trucksListDestination").val(),i=$(".serviceType").val(),s=$(".serviceMode").val(),c=0;c<a.size();c++){var p=new Date(o.eq(c).text()).setHours(0,0,0,0);0==c&&(t=p),t>=p&&(t=p)}if("TRUCKING"!=i)if("DELIVERY"!=s)if(t<=n.setHours(0,0,0,0))finalDeliveryDateBulkModal(d,r,l,n),$("#saveDispatchPlanning").modal("show");else{e=new Date(t),e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var u='Date must be on or after <font color="red">'+e+"</font> <br/> Do you still wish to proceed?";$("#dateWarningModalBodyDes").empty().append(u),$("#dateWarningModalDes").modal("show")}else finalDeliveryDateBulkModal(d,r,l,n),$("#saveDispatchPlanning").modal("show");else finalDeliveryDateBulkModal(d,r,l,n),$("#saveDispatchPlanning").modal("show")})}function lclHideVesselSchedule(){$(".lclConsolidateSchedule tbody tr").show();for(var e=$(".lclConsolidateSchedule tbody tr"),t=$(".lclConsolidateSchedule tbody tr td:nth-child(4)"),a=$(".lclConsolidateSchedule tbody tr td:nth-child(5)"),o=$(".lclCheckbox:checked"),n=o.eq(0).closest("tr").find("td").eq(5).text(),d=o.eq(0).closest("tr").find("td").eq(6).text(),r=0;r<e.size();r++)placeAbbrev(a.eq(r).text())==d?placeAbbrev(t.eq(r).text())!=n&&t.eq(r).closest("tr").hide():t.eq(r).closest("tr").hide();for(var l,i,s=$(".lclCheckbox:checked"),r=0;r<s.size();r++){var c=new Date(s.eq(r).closest("tr").find("td").eq(11).text()).setHours(0,0,0,0),p=new Date(s.eq(r).closest("tr").find("td").eq(12).text()).setHours(0,0,0,0);0==r&&(l=c,i=p),l>c&&(l=c),i>p&&(i=p)}for(var u=$(".lclConsolidateSchedule tbody tr"),h=$(".lclConsolidateSchedule tbody tr td:nth-child(6)"),f=$(".lclConsolidateSchedule tbody tr td:nth-child(7)"),m=(new Date).setHours(0,0,0,0),r=0;r<u.size();r++){var b=new Date(h.eq(r).text()).setHours(0,0,0,0),y=new Date(f.eq(r).text()).setHours(0,0,0,0);m>b?h.eq(r).closest("tr").hide():l>b&&i!=y?h.eq(r).closest("tr").hide():l>b&&i!=y&&i>y&&h.eq(r).closest("tr").hide()}var v=$(".lclConsolidateSchedule tbody tr").size()-$('.lclConsolidateSchedule tbody tr[style="display: none;"]').size();0!=v?($(".consolidateLoadingDiv").append('Pulling up Schedules. Please Wait.<br/><i style="padding: 10px; font-size: 2em; color: #95A5A6;" class="fa fa-circle-o-notch fa-spin"></i>').hide(),$(".consolidateTableDiv").fadeIn()):($(".consolidateLoadingDiv").empty().append('<h3><i class="fa fa-warning" style="color: #ff0000"></i> No schedules found</h3><i><span style="color: red;">*</span> Please make sure you have existing/matching schedule(s).<br/>Click <a href="/operations/loadAddVesselSchedule">here</a> to create schedule(s)</i>').show(),$(".consolidateTableDiv").hide())}function filterLclTable(){for(var e=$(".lclTable tbody tr"),t=$(".lclTable tbody tr td:nth-child(6)"),a=$(".lclTable tbody tr td:nth-child(7)"),o=$(".lclTable tbody tr td:nth-child(9)"),n=$(".lclTable tbody tr td:nth-child(1)"),d=$(".lclTable tbody tr td:nth-child(14)"),r=(t.eq(0).text(),a.eq(0).text(),0);r<e.size();r++)switch(o.eq(r).text()){case"PENDING":case"INCOMPLETE":case"CANCELLED":d.eq(r).empty().append('<i style="color: red;" class="fa fa-ban"></i>'),n.eq(r).empty().append('<i style="color: red;" class="fa fa-ban"></i>')}$(".lclTable td:nth-child(15)").hide(),$(".lclTable th:nth-child(15)").hide(),$(".lclMainLoadingDiv").hide(),$(".lclMainTable").fadeIn()}function lclCheckboxFilter(e){if(e.is(":checked"))for(var t=e.closest("tr").find("td").eq(6).text(),a=e.closest("tr").find("td").eq(5).text(),o=$(".lclCheckbox"),n=0;n<o.size();n++)o.eq(n).closest("tr").find("td").eq(6).text()==t&&o.eq(n).closest("tr").find("td").eq(5).text()==a?o.eq(n).attr("disabled",!1):o.eq(n).attr("disabled",!0);else{var d=$(".lclCheckbox:disabled"),r=$(".lclCheckbox:checked");if(0!=r.size())for(var n=0;n<d.size();n++)r.eq(n).closest("tr").find("td").eq(5).text()==d.eq(n).closest("tr").find("td").eq(5).text()&&r.eq(n).closest("tr").find("td").eq(6).text()!=d.eq(n).closest("tr").find("td").eq(6).text()&&d.eq(n).attr("disabled",!1);else d.attr("disabled",!1)}0!=$(".lclCheckbox:checked").size()?($(".warningMsg").hide(),$(".consolidateBtn").attr("disabled",!1)):($(".warningMsg").show(),$(".consolidateBtn").attr("disabled",!0))}function actionConfirmation(e,t,a){e.click(function(){t.attr("href",$(this).prev().attr("href")),a.modal("show")})}function checkDocumentModal(e,t,a,o){$.ajax({url:"confirmDocumentModal",type:"POST",data:{documentItem:e,orderIdParam:t,checkString:a,documentStageParam:o},dataType:"html",success:function(e){$("#documentListDiv").html(e),$("#confirmDocumentProcess").modal("show")},error:function(e,t,a){alert("An error occurred! "+a)}})}function processDocumentStage(e,t,a,o,n){for(var d=$(e+" tbody tr td:nth-child("+o+")"),r=$(e+" tbody tr td:nth-child("+n+")"),l=0;l<d.size();l++)switch(d.eq(l).text()){case"0":d.eq(l).closest("tr").css("background-color","#D0D0D0");break;case"1":d.eq(l).closest("tr").css("background-color","#66CCFF");break;case"2":d.eq(l).closest("tr").css("background-color","#ffd37e");break;case"3":d.eq(l).closest("tr").css("background-color","#feabff");break;case"4":d.eq(l).closest("tr").css("background-color","#c1c2ff");break;case"5":d.eq(l).closest("tr").css("background-color","#a7ffad")}$(e+" thead tr th:nth-child("+o+")").hide(),$(e+" thead tr th:nth-child("+n+")").hide(),d.hide(),r.hide(),a.hide(),t.fadeIn()}function planningWarningMsg(){$(".submitBtn").click(function(){for(var e=$(".vendorTable tbody tr"),t=$(".vendorTable tbody tr td:nth-child(1)"),a=$(".vendorTable tbody tr td:nth-child(2)"),o=$(".vendorTable tbody tr td:nth-child(3)"),n=$(".serviceMode").val(),d="Are you sure you want to update this status?",r="One or more items/container(s) has missing vendor(s). Are you sure you want to update this status?",l=0;l<e.size();l++)"DOOR TO DOOR"==n?null==a.eq(l).text()||""==a.eq(l).text()||null==o.eq(l).text()||""==o.eq(l).text()||null==t.eq(l).text()||""==t.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"DOOR TO PIER"==n?null==a.eq(l).text()||""==a.eq(l).text()||null==t.eq(l).text()||""==t.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"PIER TO DOOR"==n?null==o.eq(l).text()||""==o.eq(l).text()||null==t.eq(l).text()||""==t.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"PIER TO PIER"==n?null==t.eq(l).text()||""==t.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"PICKUP"==n?null==a.eq(l).text()||""==a.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"DELIVERY"==n?null==o.eq(l).text()||""==o.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")):"INTER-WAREHOUSE"==n&&(null==a.eq(l).text()||""==a.eq(l).text()?($("#planWarningBody").empty().append(r),$("#planWarningModal").modal("show")):($("#confirmStatId").empty().append(d),$("#confirmStatModal").modal("show")))})}