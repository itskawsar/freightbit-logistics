function fcl(){var e=document.getElementById("orderItem.volume").value;if(alert(e),""!=e){var t=document.getElementById("orderItem.quantity").value,a=document.getElementById("orderItem.nameSize").value;if(""==t&&(document.getElementById("orderItem.nameSize").value="",document.getElementById("orderItem.volume").value="",document.getElementById("orderItemVolume").value=""),"10 FOOTER"==a)var o=14*t;else if("20 FOOTER"==a)var o=28*t;else if("40 FOOTER"==a)var o=56*t;document.getElementById("orderItem.volume").value=o,document.getElementById("orderItemVolume").value=o}}function serviceValidate(){var e=document.getElementById("serviceReq"),t=e.options[e.selectedIndex].value;"FULL CARGO LOAD"==t?(document.getElementById("item").style.display="none",document.getElementById("item-menu").style.display="none",document.getElementById("cargo-menu").style.display="block"):("LESS CARGO LOAD"==t||"LOOSE CARGO LOAD"==t||"ROLLING CARGO LOAD"==t)&&(document.getElementById("cargo").style.display="none",document.getElementById("cargo-menu").style.display="none",document.getElementById("item-menu").style.display="block")}function typeValidate(){var e=document.getElementById("mode"),t=e.options[e.selectedIndex].value;"DOOR TO PIER"==t?($("#deliveryaddress").prop("disabled",!0),$("#pickupaddress").prop("disabled",!1),$("#datepicker1").prop("disabled",!1),$("#datepicker2").prop("disabled",!0)):"PIER TO DOOR"==t?($("#deliveryaddress").prop("disabled",!1),$("#pickupaddress").prop("disabled",!0),$("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!1)):"PIER TO PIER"==t&&($("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!0),$("#pickupaddress").prop("disabled",!0),$("#deliveryaddress").prop("disabled",!0))}function getMaxValue(e,t){if("10 FOOTER"==t){if("VOLUME"==e)return 14;if("WEIGHT"==e)return 9e3}else if("20 FOOTER"==t){if("VOLUME"==e)return 28;if("WEIGHT"==e)return 18e3}else if("40 STD FOOTER"==t){if("VOLUME"==e)return 56;if("WEIGHT"==e)return 2e4}else if("40 HC FOOTER"==t){if("VOLUME"==e)return 78;if("WEIGHT"==e)return 22e3}}function initValidationScript(e){for(var t,a,o,n,r=$('.mainTable tbody td input[type="checkbox"]'),l=$(".mainTable tbody tr td:nth-child(4)"),i=$(".mainTable tbody tr td:nth-child(5)"),d=$("#result"),s=$("#result-vol"),c=$("#containerType").val(),p=$("#submitBtn"),u=$(".containerItems tbody tr td:nth-child(3)"),h=$(".containerItems tbody tr td:nth-child(4)"),f=0;f<$(".mainTable tbody tr").size();f++)l.eq(f).attr("id","val"+(f+1)),i.eq(f).attr("id","val"+(f+1)+"-vol"),r.eq(f).attr("class","val"+(f+1)),r.eq(f).is(":checked")&&(a=parseFloat(d.text())+parseFloat(l.eq(f).text()),t=parseFloat(s.text())+parseFloat(i.eq(f).text()),d.empty().append(a),s.empty().append(t));if($("#maxVol").empty().append(getMaxValue("VOLUME",c)),$("#maxWt").empty().append(getMaxValue("WEIGHT",c)),"CONSO_EDIT"==e)for(var m=0;m<$(".containerItems tbody tr").size();m++)o=parseFloat(h.eq(m).text())+parseFloat(s.text()),n=parseFloat(u.eq(m).text())+parseFloat(d.text()),d.empty().append(n),s.empty().append(o);r.change(function(){var t,a,r=parseFloat($("#maxWt").text()),l=parseFloat($("#maxVol").text()),i=$("#"+this.className),c=$("#"+this.className+"-vol");$.isNumeric(i.text())&&$.isNumeric(c.text())&&(this.checked?(t=parseFloat(d.text())+parseFloat(i.text()),a=parseFloat(s.text())+parseFloat(c.text())):(t=parseFloat(d.text())-parseFloat(i.text()),a=parseFloat(s.text())-parseFloat(c.text()))),"CONSO_EDIT"==e?t==n||a==o||t>r||a>l?p.prop("disabled",!0):p.prop("disabled",!1):t>r||a>l?(p.prop("disabled",!0),$("#finalBtn").addClass("disabled")):(p.prop("disabled",!1),$("#finalBtn").removeClass("disabled")),t>r&&(t='<font color="red">'+t+"</font>"),a>l&&(a='<font color="red">'+a+"</font>"),(0==t||0==a)&&(p.prop("disabled",!0),$("#finalBtn").addClass("disabled")),d.empty().append(t),s.empty().append(a)})}function resetBox(e){if($('.mainTable tbody td input[type="checkbox"]').removeAttr("checked"),"CONSO_EDIT"==e){for(var t=0,a=0,o=0;o<$(".containerItems tbody tr").size();o++)t=parseFloat($(".containerItems tbody tr td:nth-child(4)").eq(o).text())+t,a=parseFloat($(".containerItems tbody tr td:nth-child(3)").eq(o).text())+a;$("#result").empty().append(a),$("#result-vol").empty().append(t),$("#submitBtn").prop("disabled",!0)}else $("#result").empty().append(0),$("#result-vol").empty().append(0)}function tablePropClass(e,t,a,o,n,r,l,i){for(var d=$("."+t+" tbody tr"),s=0;s<d.size();s++){var c=$("."+t+" tbody tr td:nth-child("+a+")").eq(s).text(),p=$("."+t+" tbody tr td:nth-child("+o+")").eq(s),u=$("."+t+" tbody tr td:nth-child("+n+")").eq(s),h=$("."+t+" tbody tr td:nth-child("+r+")").eq(s),f=changeIcons(p.text()),m=reqAbbrev(u.text()),b=modeAbbrev(h.text());if("DESTI_ORIG"==e){var v=$("."+t+" tbody tr td:nth-child("+i+")").eq(s),y=$("."+t+" tbody tr td:nth-child("+l+")").eq(s),D=placeAbbrev(v.text()),O=placeAbbrev(y.text());v.empty().append(D),y.empty().append(O)}d.eq(s).css("background-color",trColor(c)),p.empty().append(f),u.empty().append(m),h.empty().append(b)}}function tableProp(e,t,a,o,n,r,l,i,d){for(var s=$("#"+t+" tbody tr"),c=0;c<s.size();c++){var p=$("#"+t+" tbody tr td:nth-child("+a+")").eq(c).text(),u=$("#"+t+" tbody tr td:nth-child("+o+")").eq(c),h=$("#"+t+" tbody tr td:nth-child("+n+")").eq(c),f=$("#"+t+" tbody tr td:nth-child("+r+")").eq(c),m=$("#"+t+" tbody tr td:nth-child("+d+")").eq(c),b=changeIcons(u.text()),v=reqAbbrev(h.text()),y=modeAbbrev(f.text()),D=dateAbbrev(m.text());if("DESTI_ORIG"==e){var O=$("#"+t+" tbody tr td:nth-child("+i+")").eq(c),g=$("#"+t+" tbody tr td:nth-child("+l+")").eq(c),I=placeAbbrev(O.text()),T=placeAbbrev(g.text());O.empty().append(I),g.empty().append(T)}s.eq(c).css("background-color",trColor(p)),u.empty().append(b),h.empty().append(v),f.empty().append(y),m.empty().append(D)}}function placeAbbrev(e){return"MANILA"==e?"MNL":"BACOLOD"==e?"BAC":"BUTUAN"==e?"BXU":"CAGAYAN"==e?"CGY":"COTABATO"==e?"CBO":"DAVAO"==e?"DVO":"DUMAGUETE"==e?"DGT":"DIPOLOG"==e?"DPG":"GEN. SANTOS"==e?"GES":"ILIGAN"==e?"ILI":"ILOILO"==e?"ILO":"OZAMIS"==e?"OZA":"GEN. SANTOS"==e?"GES":"PALAWAN"==e?"PPS":"ROXAS"==e?"RXS":"TAGBILARAN"==e?"TAG":"TACLOBAN"==e?"TAC":"ZAMBOANGA"==e?"ZAM":"CEBU"==e?"CEB":e}function trColor(e){return"DISAPPROVED"==e||"CANCELLED"==e?"#f2dede":"APPROVED"==e||"SERVICE ACCOMPLISHED"==e?"#dff0d8":"ON GOING"==e?"#bce8f1":"PENDING"==e||"INCOMPLETE"==e?"#f0ad4e":void 0}function changeIcons(e){return"SHIPPING AND TRUCKING"==e?"<i class='fa fa-anchor' /> <i class='fa fa-truck' />":"SHIPPING"==e?"<i class='fa fa-anchor' />":"TRUCKING"==e?"<i class='fa fa-truck' />":e}function reqAbbrev(e){return"FULL CARGO LOAD"==e||"FULL CONTAINER LOAD"==e?"FCL":"FULL TRUCK LOAD"==e?"FTL":"LESS TRUCK LOAD"==e?"LTL":"LESS CARGO LOAD"==e||"LESS CONTAINER LOAD"==e?"LCL":"LOOSE CARGO LOAD"==e?"LC":"ROLLING CARGO LOAD"==e?"RCU":e}function modeAbbrev(e){return"DOOR TO DOOR"==e?"DD":"DOOR TO PIER"==e||"DOOR TO PORT"==e?"DP":"PIER TO DOOR"==e||"PORT TO DOOR"==e?"PD":"PIER TO PIER"==e||"PORT TO PORT"==e?"PP":"PICKUP"==e?"PUP":"DELIVERY"==e?"DEL":"INTER-WAREHOUSE"==e?"ITW":e}function dateAbbrev_Format3(e){var t,a=e.split("-");return t="01"==a[0]?"JAN":"02"==a[0]?"FEB":"03"==a[0]?"MAR":"04"==a[0]?"APR":"05"==a[0]?"MAY":"06"==a[0]?"JUN":"07"==a[0]?"JUL":"08"==a[0]?"AUG":"09"==a[0]?"SEP":"10"==a[0]?"OCT":"11"==a[0]?"NOV":"12"==a[0]?"DEC":a[0],a[1]+"-"+t+"-"+a[2]}function dateAbbrev(e){var t,a=e.split("-");return t="01"==a[1]?"JAN":"02"==a[1]?"FEB":"03"==a[1]?"MAR":"04"==a[1]?"APR":"05"==a[1]?"MAY":"06"==a[1]?"JUN":"07"==a[1]?"JUL":"08"==a[1]?"AUG":"09"==a[1]?"SEP":"10"==a[1]?"OCT":"11"==a[1]?"NOV":"12"==a[1]?"DEC":a[1],a[2]+"-"+t+"-"+a[0]}function initTimestampAbbrev(e,t){for(var a=$("."+e+" tbody tr td:nth-child("+t+")"),o=0;o<a.size();o++){var n=a.eq(o).text().split(" ");""!=n[0]&&a.eq(o).empty().append(dateAbbrev(n[0])+" "+n[1].substr(0,8))}}function dateAbbrev_Format2(e,t){for(var a=$("#"+e+" tbody tr"),o=0;o<a.size();o++){var n,r=$("#"+e+" tbody tr td:nth-child("+t+")").eq(o),l=r.text().split("-");n="01"==l[0]?"JAN":"02"==l[0]?"FEB":"03"==l[0]?"MAR":"04"==l[0]?"APR":"05"==l[0]?"MAY":"06"==l[0]?"JUN":"07"==l[0]?"JUL":"08"==l[0]?"AUG":"09"==l[0]?"SEP":"10"==l[0]?"OCT":"11"==l[0]?"NOV":"12"==l[0]?"DEC":l[0],r.empty().append(l[1]+"-"+n+"-"+l[2])}}function newlineHandler(e,t){for(var a,o=$("."+e+" tbody tr td:nth-child("+t+")"),n=0;n<o.size();n++)a=o.eq(n).text().replace(/\n/g,"<br />"),o.eq(n).empty().append(a)}function computeAll(e,t,a,o){var n=$("."+e+' tbody tr td input[type="checkbox"]'),r=0,l=0;if("ADD"==o){for(var i=0;i<n.size();i++){var d=parseFloat(n.eq(i).closest("tr").find("td").eq(8).text()),s=parseFloat(n.eq(i).closest("tr").find("td").eq(9).text());r+=d,l+=s}$("#"+t).empty().append(r),$("#"+a).empty().append(l),triggerComputation(r,l)}else"SUBTRACT"==o&&($("#"+a).empty().append("0"),$("#"+t).empty().append("0"),$("#recommendedContent").empty().append("Choose item(s) first"))}function triggerComputation(e,t){startRecommendation("mainReco","recommendedContent",e,t)}function seaFreightLclComputation(e,t,a){var o=$("."+e+' tbody tr td input[type="checkbox"]');o.change(function(){var e=parseFloat($(this).closest("tr").find("td").eq(9).text()),o=parseFloat($(this).closest("tr").find("td").eq(10).text()),n=$("#"+t),r=$("#"+a);$(this).is(":checked")?(e=parseFloat(n.text())+e,o=parseFloat(r.text())+o,n.empty().append(e),r.empty().append(o)):(e=parseFloat(n.text())-e,o=parseFloat(r.text())-o,n.empty().append(e),r.empty().append(o)),startRecommendation("mainReco","recommendedContent",e,o)})}function startRecommendation(e,t,a,o){if(0==a||0==o)$("#"+t).empty().append("Choose item(s) first");else{var n;n=firstRecommendation(a,o),$("#"+t).empty().append(n)}}function firstRecommendation(e,t){for(var a=e,o=t,n=0,r=0,l=0,i=0,d="NONE";;){if(0>=o)break;o>53.2||a>15320?(a-=16890,o-=74.1,n++):o>26.6||a>14870?(a-=15320,o-=53.2,r++):o>13.3||a>7250?(a-=14870,o-=26.6,l++):(o>0||a>0)&&(a-=7250,o-=13.3,i++)}return 0!=n&&(d="<p>"+n+" - 40 FOOTER HC CONTAINER(S)</p>"),0!=r&&(d="NONE"==d?"<p>"+r+" - 40 FOOTER STD CONTAINER(S)</p>":d+"<p>"+r+" - 40 FOOTER STD CONTAINER(S)</p>"),0!=l&&(d="NONE"==d?"<p>"+l+" - 20 FOOTER CONTAINER(S)</p>":d+"<p>"+l+" - 20 FOOTER CONTAINER(S)</p>"),0!=i&&(d="NONE"==d?"<p>"+i+" - 10 FOOTER CONTAINER(S)</p>":d+"<p>"+i+" - 10 FOOTER CONTAINER(S)</p>"),d}function massCheckbox(e,t){$("#"+e).click(function(){var e=$("."+t+' tbody tr td input[type="checkbox"]');e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0)})}function validationForm(e,t,a){function o(){console.clear();for(var o=$("."+e+":enabled"),n=0,r=0;r<o.size();r++)""!=o.eq(r).val()&&void 0!=o.eq(r).val()&&(n++,console.log("- "+o.eq(r).val()));console.log(n+" out of "+o.size()),"BOOKING"==a?n==o.size()&&notifBox_booking("notifBox")?t.prop("disabled",!1):t.prop("disabled",!0):n==o.size()?t.prop("disabled",!1):t.prop("disabled",!0)}var n=$("."+e+":enabled"),t=$("."+t);n.change(function(){o()}),n.keyup(function(){o()}),n.click(function(){o()}),n.hover(function(){o()}),"BOOKING"==a&&$(".notifBox").click(function(){o()})}function postAjaxHtml(e,t){$.ajax({url:e,type:"POST",dataType:"html",success:function(e){$("#"+t).html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showGateOutFields(e){$.ajax({url:"loadCheckoutFormPage",type:"POST",data:{containerIdParam:e},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showActualDateFields(e){$.ajax({url:"loadActualDateForm",type:"POST",data:{statusIdParam:e},dataType:"html",success:function(e){$("#actualInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showEditItemListingFields(e){$.ajax({url:"loadEditItemListing",type:"POST",async:!1,data:{orderItemIdParam:e},dataType:"html",success:function(e){$("#editItemListingInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showContainerDetails(e){$.ajax({url:"loadContainerDetails",type:"POST",data:{orderItemIdParam:e},dataType:"html",success:function(e){$("#containerInput").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function restrictField_Numbers(e){$("."+e).keypress(function(e){var t=[],a=e.which;for(i=48;i<58;i++)t.push(i);t.indexOf(a)>=0||e.preventDefault()})}function notifBox_booking(e){for(var t=!1,a=0;a<$("."+e).size();a++)$("."+e).eq(a).is(":checked")&&(t=!0);return t}function validateSearchModal(e,t,a){function o(){console.clear(),""!=$("."+t).val()&&""!=$("."+a).val()?($("."+e).prop("disabled",!1),console.log("ENABLE BUTTON")):($("."+e).prop("disabled",!0),console.log("DISABLE BUTTON"))}$("."+t).keyup(function(){o()}),$("."+a).change(function(){o()})}function changeDateValue(e,t){var a=new Date(e.val());return a.setDate("DECREMENT"==t?a.getDate()-1:a.getDate()+1),a=a.getMonth()+1+"-"+a.getDate()+"-"+a.getUTCFullYear()}function hideVesselSchedule(){for(var e=$(".listOfSchedules tbody tr td:nth-child(6)"),t=$(".listOfSchedules tbody tr td:nth-child(7)"),a=$(".listOfSchedules tbody tr td:nth-child(8)"),o=$("#bookingClass"),n=(new Date).setHours(0,0,0,0),r=new Date($(".pickupDate").val()).setHours(0,0,0,0),l=new Date($(".deliveryDate").val()).setHours(0,0,0,0),i=($(".currentSchedulesTable tbody tr td:nth-child(2)").eq(0).text(),$(".listOfSchedules tbody tr td:nth-child(2)"),0);i<e.size();i++){var d=new Date(e.eq(i).text()).setHours(0,0,0,0),s=new Date(t.eq(i).text()).setHours(0,0,0,0);if(n>d)e.eq(i).closest("tr").remove();else if(r>d||s>l)e.eq(i).closest("tr").remove();else{if("REGULAR"==o.val()){if("PREMIUM"==a.eq(i).text()){a.eq(i).closest("tr").remove();continue}}else if("ECONOMY"==o.val()&&"ECONOMY"!=a.eq(i).text()){a.eq(i).closest("tr").remove();continue}var c=dateAbbrev_Format3(t.eq(i).text()),p=dateAbbrev_Format3(e.eq(i).text());t.eq(i).empty().append(c),e.eq(i).empty().append(p)}}setTimeout(function(){0==$(".listOfSchedules tbody tr").size()?$(".loadingDiv").empty().append("<i>No schedule found.</i>"):($(".listOfSchedules tbody tr").size()>10&&$(".listOfSchedules").oneSimpleTablePagination({rowsPerPage:10}),$(".loadingDiv").hide(),$(".tableDiv").fadeIn())},1e3)}function addTotalRate(){for(var e=$(".itemListing tbody tr td:nth-child(7)"),t=0,a=0;a<e.size();a++)if($.isNumeric(parseFloat(e.eq(a).text()))){var o=parseFloat(e.eq(a).text());t+=o,e.eq(a).empty().append(o.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))}else e.eq(a).empty().append('<font color="red">0.00</font>');t=t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),(0==t||0==t||0==t)&&(t='<font color="red">'+t+"</font>"),$("#totalRate").empty().append(t),$(".loadingDiv").hide(),$(".tableDiv").fadeIn()}function dateValidationInit(){$(".finalSaveBtn").click(function(){var e=new Date($(".pickupDate").val()),t=new Date($(".departureDate").val()),a=new Date($(".finalPickupDate").val()),o=($(".finalSaveBtn"),$(".serviceModeField").val()),n=($(".originForm"),$("#vendorListOrigin").val()),r=$("#driverList").val(),l=$("#trucksList").val();if("DELIVERY"!=o)if("Invalid Date"!=t&&"Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0)&&a.setHours(0,0,0,0)<=t.setHours(0,0,0,0))finalPickupDateModal(n,r,l,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var i='Date must be between <font color="red">'+e+'</font> and <font color="red">'+t+"</font> <br/>Do you still wish to proceed?";$("#dateWarningModalBody").empty().append(i),$("#dateWarningModal").modal("show")}else if("Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0))finalPickupDateModal(n,r,l,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var i='Date must be no later than <font color="red">'+e+"</font>";$("#dateWarningModalBody").empty().append(i),$("#dateWarningModal").modal("show")}else if(a.setHours(0,0,0,0)<=t.setHours(0,0,0,0))finalPickupDateModal(n,r,l,a),$("#saveDispatchPlanning").modal("show");else{t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var i='Date must be no later than <font color="red">'+t+"</font>";$("#dateWarningModalBody").empty().append(i),$("#dateWarningModal").modal("show")}else finalPickupDateModal(n,r,l,a),$("#saveDispatchPlanning").modal("show")})}function dateValidationInitDes(){$(".finalSaveBtnDes").click(function(){var e=new Date($(".deliveryDate").val()),t=new Date($(".arrivalDate").val()),a=new Date($(".finalDeliveryDate").val()),o=($(".finalSaveBtnDes").val(),$(".destinationForm").val(),$("#vendorListDestination").val()),n=$("#driverListDestination").val(),r=$("#trucksListDestination").val();if("Invalid Date"!=t&&"Invalid Date"!=e)if(e.setHours(0,0,0,0)>=a.setHours(0,0,0,0)&&t.setHours(0,0,0,0)<=a.setHours(0,0,0,0))finalDeliveryDateModal(o,n,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be between <font color="red">'+t+'</font> and <font color="red">'+e+"</font> <br/>Do you still wish to proceed?";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}else if("Invalid Date"!=e)if(e.setHours(0,0,0,0)>=a.setHours(0,0,0,0))finalDeliveryDateModal(o,n,r,a),$("#saveDispatchPlanning").modal("show");else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var l='Date must be no later than <font color="red">'+e+"</font>";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}else if(t.setHours(0,0,0,0)<=a.setHours(0,0,0,0))finalDeliveryDateModal(o,n,r,a),$("#saveDispatchPlanning").modal("show");else{t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var l='Date must be on or after <font color="red">'+t+"</font>";$("#dateWarningModalBodyDes").empty().append(l),$("#dateWarningModalDes").modal("show")}})}function finalPickupDateModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchAction",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalPickupParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalDeliveryDateModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchActionDes",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalDeliveryParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalPickupDateBulkModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchBulkAction",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalPickupParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function finalDeliveryDateBulkModal(e,t,a,o){o=o.getUTCFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),$.ajax({url:"getConfirmModalDispatchBulkActionDes",type:"POST",data:{vendorId:e,driverCodeParam:t,truckCodeParam:a,finalDeliveryParam:o},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occured! "+a)}})}function sameDateValidationInit(){$(".submitBtn").click(function(){var e=new Date($(".departureDate").val()),t=new Date($(".arrivalDate").val()),a=($(".submitBtn"),$(".vesselScheduleForm"));if(e.setHours(0,0,0,0)==t.setHours(0,0,0,0)){var o="Departure Date is the same with Arrival Date";$("#dateWarningModalBody").empty().append(o),$("#dateWarningModal").modal("show")}else a.submit()})}function vesselScheduleColor(e,t){for(var a=$("#"+e+" tbody tr td:nth-child("+t+")"),o=0;o<a.size();o++){var n=new Date(a.eq(o).text()).setHours(0,0,0,0),r=(new Date).setHours(0,0,0,0);r>n?a.eq(o).closest("tr").css("background-color","#f2a5aa"):a.eq(o).closest("tr").css("background-color","#dff0d8")}}function changeDocumentInputLabels(e){var t=$(".documentSeries");switch(e){case"BOOKING REQUEST FORM":t.empty().append('BRF Number <span class="asterisk_red"></span>');break;case"PROFORMA BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"MASTER BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"HOUSE BILL OF LADING":t.empty().append('Bill of Lading Number <span class="asterisk_red"></span>');break;case"HOUSE WAYBILL ORIGIN":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"MASTER WAYBILL ORIGIN":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"HOUSE WAYBILL DESTINATION":t.empty().append('Waybill Number <span class="asterisk_red"></span>');break;case"MASTER WAYBILL DESTINATION":t.empty().append('Waybill Number <span class="asterisk_red"></span>')}}function preventSamePort(e,t){t.find("option").show(),t.find('option:contains("'+e.val()+'")').hide()}function buttonControl(){switch($(".serviceModeInput").val()){case"PIER TO DOOR":$(".houseWaybillDestinationBtn").show();break;case"DOOR TO PIER":$(".houseWaybillOriginBtn").show(),$(".houseWaybillDestinationBtn").hide();break;case"PIER TO PIER":$(".houseWaybillDestinationBtn").hide(),$(".houseWaybillOriginBtn").hide();break;default:$(".houseWaybillDestinationBtn").show(),$(".houseWaybillOriginBtn").show()}}function dispatchFilterScheduleOrigin(){$(".dispatchSaveBtn").click(function(){for(var e,t,a=$(".freightTableBulk tbody tr"),o=$(".freightTableBulk tbody tr td:nth-child(6)"),n=new Date($(".dispatchFinalPickup").val()),r=($(".dispatchOriginForm"),$("#vendorListOrigin").val()),l=$("#driverList").val(),i=$("#trucksList").val(),d=0;d<a.size();d++){var s=new Date(o.eq(d).text()).setHours(0,0,0,0);0==d&&(t=s),t>=s&&(t=s)}if(t>=n.setHours(0,0,0,0))finalPickupDateBulkModal(r,l,i,n),$("#saveDispatchPlanning").modal("show");else{e=new Date(t),e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var c='Date must be no later than <font color="red">'+e+"</font> <br/> Do you still wish to proceed?";$("#dateWarningModalBody").empty().append(c),$("#dateWarningModal").modal("show")}})}function dispatchFilterScheduleDestination(){$(".dispatchSaveBtnDes").click(function(){for(var e,t,a=$(".freightTableBulk tbody tr"),o=$(".freightTableBulk tbody tr td:nth-child(7)"),n=new Date($(".dispatchFinalDelivery").val()),r=($(".dispatchDestinationForm"),$("#vendorListDestination").val()),l=$("#driverListDestination").val(),i=$("#trucksListDestination").val(),d=0;d<a.size();d++){var s=new Date(o.eq(d).text()).setHours(0,0,0,0);0==d&&(t=s),t>=s&&(t=s)}if(t<=n.setHours(0,0,0,0))finalDeliveryDateBulkModal(r,l,i,n),$("#saveDispatchPlanning").modal("show");else{e=new Date(t),e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var c='Date must be on or after <font color="red">'+e+"</font> <br/> Do you still wish to proceed?";$("#dateWarningModalBodyDes").empty().append(c),$("#dateWarningModalDes").modal("show")}})}function lclHideVesselSchedule(){$(".lclConsolidateSchedule tbody tr").show();for(var e=$(".lclConsolidateSchedule tbody tr"),t=$(".lclConsolidateSchedule tbody tr td:nth-child(4)"),a=$(".lclConsolidateSchedule tbody tr td:nth-child(5)"),o=$(".lclCheckbox:checked"),n=o.eq(0).closest("tr").find("td").eq(5).text(),r=o.eq(0).closest("tr").find("td").eq(6).text(),l=0;l<e.size();l++)placeAbbrev(a.eq(l).text())==r?placeAbbrev(t.eq(l).text())!=n&&t.eq(l).closest("tr").hide():t.eq(l).closest("tr").hide();for(var i,d,s=$(".lclCheckbox:checked"),l=0;l<s.size();l++){var c=new Date(s.eq(l).closest("tr").find("td").eq(11).text()).setHours(0,0,0,0),p=new Date(s.eq(l).closest("tr").find("td").eq(12).text()).setHours(0,0,0,0);0==l&&(i=c,d=p),i>c&&(i=c),d>p&&(d=p)}for(var u=$(".lclConsolidateSchedule tbody tr"),h=$(".lclConsolidateSchedule tbody tr td:nth-child(6)"),f=$(".lclConsolidateSchedule tbody tr td:nth-child(7)"),m=(new Date).setHours(0,0,0,0),l=0;l<u.size();l++){var b=new Date(h.eq(l).text()).setHours(0,0,0,0),v=new Date(f.eq(l).text()).setHours(0,0,0,0);m>b?h.eq(l).closest("tr").hide():i>b&&d!=v?h.eq(l).closest("tr").hide():i>b&&d!=v&&d>v&&h.eq(l).closest("tr").hide()}var y=$(".lclConsolidateSchedule tbody tr").size()-$('.lclConsolidateSchedule tbody tr[style="display: none;"]').size();0!=y?($(".consolidateLoadingDiv").append('Pulling up Schedules. Please Wait.<br/><i style="padding: 10px; font-size: 2em; color: #95A5A6;" class="fa fa-circle-o-notch fa-spin"></i>').hide(),$(".consolidateTableDiv").fadeIn()):($(".consolidateLoadingDiv").empty().append('<h3><i class="fa fa-warning" style="color: #ff0000"></i> No schedules found</h3><i><span style="color: red;">*</span> Please make sure you have existing/matching schedule(s).<br/>Click <a href="/operations/loadAddVesselSchedule">here</a> to create schedule(s)</i>').show(),$(".consolidateTableDiv").hide())}function filterLclTable(){for(var e=$(".lclTable tbody tr"),t=$(".lclTable tbody tr td:nth-child(6)"),a=$(".lclTable tbody tr td:nth-child(7)"),o=$(".lclTable tbody tr td:nth-child(9)"),n=$(".lclTable tbody tr td:nth-child(1)"),r=$(".lclTable tbody tr td:nth-child(14)"),l=(t.eq(0).text(),a.eq(0).text(),0);l<e.size();l++)switch(o.eq(l).text()){case"PENDING":case"INCOMPLETE":case"CANCELLED":r.eq(l).empty().append('<i style="color: red;" class="fa fa-ban"></i>'),n.eq(l).empty().append('<i style="color: red;" class="fa fa-ban"></i>')}$(".lclTable td:nth-child(15)").hide(),$(".lclTable th:nth-child(15)").hide(),$(".lclMainLoadingDiv").hide(),$(".lclMainTable").fadeIn()}function lclCheckboxFilter(e){if(e.is(":checked"))for(var t=e.closest("tr").find("td").eq(6).text(),a=e.closest("tr").find("td").eq(5).text(),o=$(".lclCheckbox"),n=0;n<o.size();n++)o.eq(n).closest("tr").find("td").eq(6).text()==t&&o.eq(n).closest("tr").find("td").eq(5).text()==a?o.eq(n).attr("disabled",!1):o.eq(n).attr("disabled",!0);else{var r=$(".lclCheckbox:disabled"),l=$(".lclCheckbox:checked");if(0!=l.size())for(var n=0;n<r.size();n++)l.eq(n).closest("tr").find("td").eq(5).text()==r.eq(n).closest("tr").find("td").eq(5).text()&&l.eq(n).closest("tr").find("td").eq(6).text()!=r.eq(n).closest("tr").find("td").eq(6).text()&&r.eq(n).attr("disabled",!1);else r.attr("disabled",!1)}0!=$(".lclCheckbox:checked").size()?($(".warningMsg").hide(),$(".consolidateBtn").attr("disabled",!1)):($(".warningMsg").show(),$(".consolidateBtn").attr("disabled",!0))}function actionConfirmation(e,t,a){e.click(function(){t.attr("href",$(this).prev().attr("href")),a.modal("show")})}function checkDocumentModal(e,t,a,o){$.ajax({url:"confirmDocumentModal",type:"POST",data:{documentItem:e,orderIdParam:t,checkString:a,documentStageParam:o},dataType:"html",success:function(e){$("#documentListDiv").html(e),$("#confirmDocumentProcess").modal("show")},error:function(e,t,a){alert("An error occurred! "+a)}})}function processDocumentStage(e,t,a,o,n){for(var r=$(e+" tbody tr td:nth-child("+o+")"),l=$(e+" tbody tr td:nth-child("+n+")"),i=0;i<r.size();i++)switch(r.eq(i).text()){case"0":r.eq(i).closest("tr").css("background-color","#D0D0D0");break;case"1":r.eq(i).closest("tr").css("background-color","#66CCFF");break;case"2":r.eq(i).closest("tr").css("background-color","#ffd37e");break;case"3":r.eq(i).closest("tr").css("background-color","#feabff");break;case"4":r.eq(i).closest("tr").css("background-color","#c1c2ff");break;case"5":r.eq(i).closest("tr").css("background-color","#a7ffad")}$(e+" thead tr th:nth-child("+o+")").hide(),$(e+" thead tr th:nth-child("+n+")").hide(),r.hide(),l.hide(),a.hide(),t.fadeIn()}function confirmStatusMsg(){$(".submitBtn").click(function(){var e="Are you sure you want to update this status?";$("#confirmStatId").empty().append(e),$("#confirmStatModal").modal("show")})}