function fcl(){var e=document.getElementById("orderItem.volume").value;if(""!=e){var t=document.getElementById("orderItem.quantity").value,a=document.getElementById("orderItem.nameSize").value;if(""==t&&(document.getElementById("orderItem.nameSize").value="",document.getElementById("orderItem.volume").value="",document.getElementById("orderItemVolume").value=""),"10 FOOTER"==a)var n=14*t;else if("20 FOOTER"==a)var n=28*t;else if("40 FOOTER"==a)var n=56*t;document.getElementById("orderItem.volume").value=n,document.getElementById("orderItemVolume").value=n}}function serviceValidate(){var e=document.getElementById("serviceReq"),t=e.options[e.selectedIndex].value;"FULL CARGO LOAD"==t?(document.getElementById("item").style.display="none",document.getElementById("item-menu").style.display="none",document.getElementById("cargo-menu").style.display="block"):("LESS CARGO LOAD"==t||"LOOSE CARGO LOAD"==t||"ROLLING CARGO LOAD"==t)&&(document.getElementById("cargo").style.display="none",document.getElementById("cargo-menu").style.display="none",document.getElementById("item-menu").style.display="block")}function typeValidate(){var e=document.getElementById("mode"),t=e.options[e.selectedIndex].value;"DOOR TO PIER"==t?($("#deliveryaddress").prop("disabled",!0),$("#pickupaddress").prop("disabled",!1),$("#datepicker1").prop("disabled",!1),$("#datepicker2").prop("disabled",!0)):"PIER TO DOOR"==t?($("#deliveryaddress").prop("disabled",!1),$("#pickupaddress").prop("disabled",!0),$("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!1)):"PIER TO PIER"==t&&($("#datepicker1").prop("disabled",!0),$("#datepicker2").prop("disabled",!0),$("#pickupaddress").prop("disabled",!0),$("#deliveryaddress").prop("disabled",!0))}function getMaxValue(e,t){if("10 FOOTER"==t){if("VOLUME"==e)return 14;if("WEIGHT"==e)return 9e3}else if("20 FOOTER"==t){if("VOLUME"==e)return 28;if("WEIGHT"==e)return 18e3}else if("40 STD FOOTER"==t){if("VOLUME"==e)return 56;if("WEIGHT"==e)return 2e4}else if("40 HC FOOTER"==t){if("VOLUME"==e)return 78;if("WEIGHT"==e)return 22e3}}function initValidationScript(e){for(var t,a,n,o,r=$('.mainTable tbody td input[type="checkbox"]'),d=$(".mainTable tbody tr td:nth-child(4)"),i=$(".mainTable tbody tr td:nth-child(5)"),l=$("#result"),s=$("#result-vol"),p=$("#containerType").val(),c=$("#submitBtn"),u=$(".containerItems tbody tr td:nth-child(3)"),m=$(".containerItems tbody tr td:nth-child(4)"),f=0;f<$(".mainTable tbody tr").size();f++)d.eq(f).attr("id","val"+(f+1)),i.eq(f).attr("id","val"+(f+1)+"-vol"),r.eq(f).attr("class","val"+(f+1)),r.eq(f).is(":checked")&&(a=parseFloat(l.text())+parseFloat(d.eq(f).text()),t=parseFloat(s.text())+parseFloat(i.eq(f).text()),l.empty().append(a),s.empty().append(t));if($("#maxVol").empty().append(getMaxValue("VOLUME",p)),$("#maxWt").empty().append(getMaxValue("WEIGHT",p)),"CONSO_EDIT"==e)for(var O=0;O<$(".containerItems tbody tr").size();O++)n=parseFloat(m.eq(O).text())+parseFloat(s.text()),o=parseFloat(u.eq(O).text())+parseFloat(l.text()),l.empty().append(o),s.empty().append(n);r.change(function(){var t,a,r=parseFloat($("#maxWt").text()),d=parseFloat($("#maxVol").text()),i=$("#"+this.className),p=$("#"+this.className+"-vol");$.isNumeric(i.text())&&$.isNumeric(p.text())&&(this.checked?(t=parseFloat(l.text())+parseFloat(i.text()),a=parseFloat(s.text())+parseFloat(p.text())):(t=parseFloat(l.text())-parseFloat(i.text()),a=parseFloat(s.text())-parseFloat(p.text()))),"CONSO_EDIT"==e?t==o||a==n||t>r||a>d?c.prop("disabled",!0):c.prop("disabled",!1):t>r||a>d?(c.prop("disabled",!0),$("#finalBtn").addClass("disabled")):(c.prop("disabled",!1),$("#finalBtn").removeClass("disabled")),t>r&&(t='<font color="red">'+t+"</font>"),a>d&&(a='<font color="red">'+a+"</font>"),(0==t||0==a)&&(c.prop("disabled",!0),$("#finalBtn").addClass("disabled")),l.empty().append(t),s.empty().append(a)})}function resetBox(e){if($('.mainTable tbody td input[type="checkbox"]').removeAttr("checked"),"CONSO_EDIT"==e){for(var t=0,a=0,n=0;n<$(".containerItems tbody tr").size();n++)t=parseFloat($(".containerItems tbody tr td:nth-child(4)").eq(n).text())+t,a=parseFloat($(".containerItems tbody tr td:nth-child(3)").eq(n).text())+a;$("#result").empty().append(a),$("#result-vol").empty().append(t),$("#submitBtn").prop("disabled",!0)}else $("#result").empty().append(0),$("#result-vol").empty().append(0)}function tablePropClass(e,t,a,n,o,r,d,i){for(var l=$("."+t+" tbody tr"),s=0;s<l.size();s++){var p=$("."+t+" tbody tr td:nth-child("+a+")").eq(s).text(),c=$("."+t+" tbody tr td:nth-child("+n+")").eq(s),u=$("."+t+" tbody tr td:nth-child("+o+")").eq(s),m=$("."+t+" tbody tr td:nth-child("+r+")").eq(s),f=changeIcons(c.text()),O=reqAbbrev(u.text()),b=modeAbbrev(m.text());if("DESTI_ORIG"==e){var h=$("."+t+" tbody tr td:nth-child("+i+")").eq(s),y=$("."+t+" tbody tr td:nth-child("+d+")").eq(s),v=placeAbbrev(h.text()),E=placeAbbrev(y.text());h.empty().append(v),y.empty().append(E)}l.eq(s).css("background-color",trColor(p)),c.empty().append(f),u.empty().append(O),m.empty().append(b)}}function tableProp(e,t,a,n,o,r,d,i,l){for(var s=$("#"+t+" tbody tr"),p=0;p<s.size();p++){var c=$("#"+t+" tbody tr td:nth-child("+a+")").eq(p).text(),u=$("#"+t+" tbody tr td:nth-child("+n+")").eq(p),m=$("#"+t+" tbody tr td:nth-child("+o+")").eq(p),f=$("#"+t+" tbody tr td:nth-child("+r+")").eq(p),O=$("#"+t+" tbody tr td:nth-child("+l+")").eq(p),b=changeIcons(u.text()),h=reqAbbrev(m.text()),y=modeAbbrev(f.text()),v=dateAbbrev(O.text());if("DESTI_ORIG"==e){var E=$("#"+t+" tbody tr td:nth-child("+i+")").eq(p),I=$("#"+t+" tbody tr td:nth-child("+d+")").eq(p),A=placeAbbrev(E.text()),T=placeAbbrev(I.text());E.empty().append(A),I.empty().append(T)}s.eq(p).css("background-color",trColor(c)),u.empty().append(b),m.empty().append(h),f.empty().append(y),O.empty().append(v)}}function placeAbbrev(e){return"MANILA"==e?"MNL":"BACOLOD"==e?"BAC":"BUTUAN"==e?"BXU":"CAGAYAN"==e?"CGY":"COTABATO"==e?"CBO":"DAVAO"==e?"DVO":"DUMAGUETE"==e?"DGT":"DIPOLOG"==e?"DPG":"GEN. SANTOS"==e?"GES":"ILIGAN"==e?"ILI":"ILOILO"==e?"ILO":"OZAMIS"==e?"OZA":"GEN. SANTOS"==e?"GES":"PALAWAN"==e?"PPS":"ROXAS"==e?"RXS":"TAGBILARAN"==e?"TAG":"TACLOBAN"==e?"TAC":"ZAMBOANGA"==e?"ZAM":"CEBU"==e?"CEB":e}function trColor(e){return"INCOMPLETE"==e?"#f2a5aa":"DISAPPROVED"==e||"CANCELLED"==e?"#f2dede":"APPROVED"==e||"SERVICE ACCOMPLISHED"==e?"#dff0d8":"ON GOING"==e?"#bce8f1":"PENDING"==e?"#f0ad4e":void 0}function changeIcons(e){return"SHIPPING AND TRUCKING"==e?"<i class='fa fa-anchor' /> <i class='fa fa-truck' />":"SHIPPING"==e?"<i class='fa fa-anchor' />":"TRUCKING"==e?"<i class='fa fa-truck' />":e}function reqAbbrev(e){return"FULL CARGO LOAD"==e||"FULL CONTAINER LOAD"==e?"FCL":"FULL TRUCK LOAD"==e?"FTL":"LESS TRUCK LOAD"==e?"LTL":"LESS CARGO LOAD"==e||"LESS CONTAINER LOAD"==e?"LCL":"LOOSE CARGO LOAD"==e?"LCU":"ROLLING CARGO LOAD"==e?"RCU":e}function modeAbbrev(e){return"DOOR TO DOOR"==e?"DD":"DOOR TO PIER"==e||"DOOR TO PORT"==e?"DP":"PIER TO DOOR"==e||"PORT TO DOOR"==e?"PD":"PIER TO PIER"==e||"PORT TO PORT"==e?"PP":"PICKUP"==e?"P":"DELIVERY"==e?"D":"INTER-WAREHOUSE"==e?"IW":e}function dateAbbrev(e){var t,a=e.split("-");return t="01"==a[1]?"JAN":"02"==a[1]?"FEB":"03"==a[1]?"MAR":"04"==a[1]?"APR":"05"==a[1]?"MAY":"06"==a[1]?"JUN":"07"==a[1]?"JUL":"08"==a[1]?"AUG":"09"==a[1]?"SEP":"10"==a[1]?"OCT":"11"==a[1]?"NOV":"12"==a[1]?"DEC":a[1],a[0].substr(2,4)+"-"+t+"-"+a[2]}function initTimestampAbbrev(e,t){for(var a=$("."+e+" tbody tr td:nth-child("+t+")"),n=0;n<a.size();n++){var o=a.eq(n).text().split(" ");""!=o[0]&&a.eq(n).empty().append(dateAbbrev(o[0])+" "+o[1].substr(0,8))}}function dateAbbrev_Format2(e,t){for(var a=$("#"+e+" tbody tr"),n=0;n<a.size();n++){var o,r=$("#"+e+" tbody tr td:nth-child("+t+")").eq(n),d=r.text().split("-");o="01"==d[0]?"JAN":"02"==d[0]?"FEB":"03"==d[0]?"MAR":"04"==d[0]?"APR":"05"==d[0]?"MAY":"06"==d[0]?"JUN":"07"==d[0]?"JUL":"08"==d[0]?"AUG":"09"==d[0]?"SEP":"10"==d[0]?"OCT":"11"==d[0]?"NOV":"12"==d[0]?"DEC":d[0],r.empty().append(d[1]+"-"+o+"-"+d[2].substr(2,4))}}function newlineHandler(e,t){for(var a,n=$("."+e+" tbody tr td:nth-child("+t+")"),o=0;o<n.size();o++)a=n.eq(o).text().replace(/\n/g,"<br />"),n.eq(o).empty().append(a)}function computeAll(e,t,a,n){var o=$("."+e+' tbody tr td input[type="checkbox"]'),r=0,d=0;if("ADD"==n){for(var i=0;i<o.size();i++){var l=parseFloat(o.eq(i).closest("tr").find("td").eq(8).text()),s=parseFloat(o.eq(i).closest("tr").find("td").eq(9).text());r+=l,d+=s}$("#"+t).empty().append(r),$("#"+a).empty().append(d),triggerComputation(r,d)}else"SUBTRACT"==n&&($("#"+a).empty().append("0"),$("#"+t).empty().append("0"),$("#recommendedContent").empty().append("Choose item(s) first"))}function triggerComputation(e,t){startRecommendation("mainReco","recommendedContent",e,t)}function seaFreightLclComputation(e,t,a){var n=$("."+e+' tbody tr td input[type="checkbox"]');n.change(function(){var e=parseFloat($(this).closest("tr").find("td").eq(8).text()),n=parseFloat($(this).closest("tr").find("td").eq(9).text()),o=$("#"+t),r=$("#"+a);$(this).is(":checked")?(e=parseFloat(o.text())+e,n=parseFloat(r.text())+n,o.empty().append(e),r.empty().append(n)):(e=parseFloat(o.text())-e,n=parseFloat(r.text())-n,o.empty().append(e),r.empty().append(n)),startRecommendation("mainReco","recommendedContent",e,n)})}function startRecommendation(e,t,a,n){if(0==a||0==n)$("#"+t).empty().append("Choose item(s) first");else{var o;o=firstRecommendation(a,n),$("#"+t).empty().append(o)}}function firstRecommendation(e,t){for(var a=e,n=t,o=0,r=0,d=0,i=0,l="NONE";;){if(0>=n)break;n>53.2||a>15320?(a-=16890,n-=74.1,o++):n>26.6||a>14870?(a-=15320,n-=53.2,r++):n>13.3||a>7250?(a-=14870,n-=26.6,d++):(n>0||a>0)&&(a-=7250,n-=13.3,i++)}return 0!=o&&(l="<p>"+o+" - 40 FOOTER HC CONTAINERS</p>"),0!=r&&(l="NONE"==l?"<p>"+r+" - 40 FOOTER STD CONTAINERS</p>":l+"<p>"+r+" - 40 FOOTER STD CONTAINERS</p>"),0!=d&&(l="NONE"==l?"<p>"+d+" - 20 FOOTER CONTAINERS</p>":l+"<p>"+d+" - 20 FOOTER CONTAINERS</p>"),0!=i&&(l="NONE"==l?"<p>"+i+" - 10 FOOTER CONTAINERS</p>":l+"<p>"+i+" - 10 FOOTER CONTAINERS</p>"),l}function massCheckbox(e,t){$("#"+e).click(function(){var e=$("."+t+' tbody tr td input[type="checkbox"]');e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0)})}function validationForm(e,t,a){function n(){for(var n=$("."+e+":enabled"),o=0,r=0;r<n.size();r++)""!=n.eq(r).val()&&void 0!=n.eq(r).val()&&o++;"BOOKING"==a?o==n.size()&&notifBox_booking("notifBox")?t.prop("disabled",!1):t.prop("disabled",!0):o==n.size()?t.prop("disabled",!1):t.prop("disabled",!0)}var o=$("."+e+":enabled"),t=$("."+t);o.change(function(){n()}),o.keyup(function(){n()}),o.click(function(){n()}),o.hover(function(){n()}),"BOOKING"==a&&$(".notifBox").click(function(){n()})}function postAjaxHtml(e,t){$.ajax({url:e,type:"POST",dataType:"html",success:function(e){$("#"+t).html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function showGateOutFields(e){$.ajax({url:"loadCheckoutFormPage",type:"POST",data:{containerIdParam:e},dataType:"html",success:function(e){$("#inputDiv").html(e)},error:function(e,t,a){alert("An error occurred! "+a)}})}function restrictField_Numbers(e){$("."+e).keypress(function(e){var t=[],a=e.which;for(i=48;58>i;i++)t.push(i);t.indexOf(a)>=0||e.preventDefault()})}function notifBox_booking(e){for(var t=!1,a=0;a<$("."+e).size();a++)$("."+e).eq(a).is(":checked")&&(t=!0);return t}function validateSearchModal(e,t,a){function n(){console.clear(),""!=$("."+t).val()&&""!=$("."+a).val()?($("."+e).prop("disabled",!1),console.log("ENABLE BUTTON")):($("."+e).prop("disabled",!0),console.log("DISABLE BUTTON"))}$("."+t).keyup(function(){n()}),$("."+a).change(function(){n()})}function changeDateValue(e,t){var a=new Date(e.val());return a.setDate("DECREMENT"==t?a.getDate()-1:a.getDate()+1),a=a.getMonth()+1+"-"+a.getDate()+"-"+a.getUTCFullYear()}function hideVesselSchedule(){for(var e,t=$("#vesselSchedule tbody tr td:nth-child(6)"),a=$("#vesselSchedule tbody tr td:nth-child(7)"),n=$("#vesselSchedule tbody tr td:nth-child(8)"),o=$("#bookingClass"),r=new Date,d=changeDateValue($(".pickupDate"),"INCREMENT"),i=changeDateValue($(".deliveryDate"),"DECREMENT"),l=0;l<t.size();l++)e=t.eq(l).text().split("-"),r.getUTCFullYear()>e[2]?t.eq(l).closest("tr").remove():r.getMonth()+1>e[1]?t.eq(l).closest("tr").remove():r.getDate()<e[0]&&t.eq(l).closest("tr").remove(),(new Date(d)>new Date(t.eq(l).text())||new Date(i)<new Date(a.eq(l).text()))&&t.eq(l).closest("tr").remove(),"REGULAR"==o.val()?"PREMIUM"==n.eq(l).text()&&n.eq(l).closest("tr").remove():"ECONOMY"==o.val()&&"ECONOMY"!=n.eq(l).text()&&n.eq(l).closest("tr").remove();setTimeout(function(){0==$("#vesselSchedule tbody tr").size()?$(".loadingDiv").empty().append("No schedule found."):($("#vesselSchedule tbody tr").size()>10&&$("#vesselSchedule").oneSimpleTablePagination({rowsPerPage:10}),$(".loadingDiv").hide(),$(".tableDiv").fadeIn())},1e3)}function addTotalRate(){for(var e=$(".itemListing tbody tr td:nth-child(7)"),t=0,a=0;a<e.size();a++)t+=parseFloat(e.eq(a).text());$("#totalRate").empty().append(t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"))}function dateValidationInit(){$(".finalSaveBtn").click(function(){var e=new Date($(".pickupDate").val()),t=new Date($(".departureDate").val()),a=new Date($(".finalPickupDate").val()),n=($(".finalSaveBtn"),$(".originForm"));if("Invalid Date"!=t&&"Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0)&&a.setHours(0,0,0,0)<=t.setHours(0,0,0,0))n.submit();else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var o='Date must be between <font color="red">'+e+'</font> and <font color="red">'+t+"</font>";$("#dateWarningModalBody").empty().append(o),$("#dateWarningModal").modal("show")}else if("Invalid Date"!=e)if(a.setHours(0,0,0,0)>=e.setHours(0,0,0,0))n.submit();else{e=e.getUTCFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var o='Date must be no later than <font color="red">'+e+"</font>";$("#dateWarningModalBody").empty().append(o),$("#dateWarningModal").modal("show")}else if(a.setHours(0,0,0,0)>=t.setHours(0,0,0,0))n.submit();else{t=t.getUTCFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();var o='Date must be no later than <font color="red">'+t+"</font>";$("#dateWarningModalBody").empty().append(o),$("#dateWarningModal").modal("show")}})}function preventDuplicatePort(e,t){{var a=e.options;a.length}e.options[t].disabled=!0,t===e.selectedIndex&&(alert('You already selected the same port "'+e.options[t].text+'". Please choose another'),this.selectedIndex=0,select2.value="")}function vesselScheduleColor(e,t){for(var a=$("#"+e+" tbody tr td:nth-child("+t+")"),n=0;n<a.size();n++){var o=new Date(a.eq(n).text()),r=new Date;r>o?a.eq(n).closest("tr").css("background-color","#f2a5aa"):a.eq(n).closest("tr").css("background-color","#dff0d8")}}function documentsCheckbox(){$(".documentsCheckbox").click(function(){void 0==$(this).parent().siblings().eq(1).text()||""==$(this).parent().siblings().eq(1).text()||null==$(this).parent().siblings().eq(1).text()?($("#warningModalContent").empty().append("Please input SERIES NUMBER first before proceeding document"),$("#warningModal").modal().show()):window.location=$(this).prev().attr("href")})}